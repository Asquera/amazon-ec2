<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <link rel="stylesheet" href="stylesheets/screen.css" type="text/css" media="screen" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
      Amazon Web Services EC2 Ruby Gem
  </title>
  <script src="javascripts/rounded_corners_lite.inc.js" type="text/javascript"></script>
<style>

</style>
  <script type="text/javascript">
    window.onload = function() {
      settings = {
          tl: { radius: 10 },
          tr: { radius: 10 },
          bl: { radius: 10 },
          br: { radius: 10 },
          antiAlias: true,
          autoPad: true,
          validTags: ["div"]
      }
      var versionBox = new curvyCorners(settings, document.getElementById("version"));
      versionBox.applyCornersToAll();
    }
  </script>
</head>
<body>
<div id="main">

    <h1>Amazon Web Services EC2 Ruby Gem</h1>
    <div id="version" class="clickable" onclick='document.location = "http://rubyforge.org/projects/amazon-ec2"; return false'>
      Get Version
      <a href="http://rubyforge.org/projects/amazon-ec2" class="numbers">0.2.0</a>
    </div>
    <h2>&#x2192; &#8216;amazon-ec2&#8217;</h2>


	<h2>About</h2>


	<p>Amazon Web Services offers a compute power on demand capability known as the Elastic Compute Cloud (EC2).  The server resources in the cloud can be provisioned on demand by making <span class="caps">HTTP</span> Query <span class="caps">API</span> calls to <span class="caps">EC2</span>.</p>


	<p>This &#8216;amazon-ec2&#8217; Ruby Gem is an interface library that can be used to interact with the Amazon <span class="caps">EC2</span> system and control server resources on demand.</p>


	<h2>Important! : Are you upgrading from an earlier release?</h2>


	<p>This latest release of the gem has undergone a pretty massive re-write.  It is no longer compatible with code you may have written that made use of an older version of &#8216;amazon-ec2&#8217; (&lt; 0.2.0).</p>


	<p>Any other gems which depended on &#8216;amazon-ec2&#8217; &lt; 0.2.0 will also no longer work with the new release.  The only project I am aware of that depended on earlier versions of &#8216;amazon-ec2&#8217; is &#8216;Capazon&#8217; which has now been deprecated and reborn as &#8216;Capsize&#8217;.  I rewrote the code with the assistance of the creator of Capazon; Jesse Newland.  Feel free to check out <a href="http://capsize.rubyforge.org/">Capsize</a> to learn more about this exciting new release.</p>


	<p>While we apologize for not being able to maintain backward compatibility, there were just too many major enhancements that needed to be made and it just would not have been possible.  I hope that the new robustness and new feature in the latest release make any pain worthwhile!  Of course the old versions are still out there, and can still be installed if you pass the version string into the gem command.  I just don&#8217;t recommend it unless you really have to.</p>


	<h2>Installing</h2>


	<p>This gem follows the standard conventions for installation on any system with Ruby and RubyGems installed.  If you have worked with gems before this will look very familiar.</p>


	<h3>Installation pre-requisites</h3>


	<h4><a href="https://aws-portal.amazon.com/gp/aws/developer/registration/index.html">Amazon Web Services developer account</a>.</h4>


	<p>You&#8217;ll need an account with <span class="caps">AWS</span> in order to use this gem at all.  That should be your first stop on this tour.  Your account must also be enabled for Amazon <span class="caps">EC2</span> usage.  After signup you&#8217;ll be provided with an &#8216;Access Key ID&#8217; and a &#8216;Secret Access Key&#8217;.  These allow you to authenticate any <span class="caps">API</span> calls you make and ensure correct billing to you for usage of their service.  Take note of these keys (and keep them safe and secret!).</p>


	<h4>Gem Dependencies</h4>


	<p>The following gems should be installed automatically as part of your install of amazon-ec2.  Most of them are testing dependencies but they should be painless to install even if you don&#8217;t plan on running the tests.</p>


	<p><a href="http://xml-simple.rubyforge.org/">XmlSimple</a>  (required)</p>


	<p><a href="http://mocha.rubyforge.org/">Mocha</a>  (optional for testing)</p>


	<p><a href="http://eigenclass.org/hiki.rb?rcov">Rcov</a> (optional for testing)</p>


	<p><a href="http://test-spec.rubyforge.org/test-spec/">Test-Spec</a> (optional for testing)</p>


	<h3>Installing the gem</h3>


	<p>Linux / <span class="caps">OS X</span> : <pre syntax="ruby">sudo gem install amazon-ec2 --include-dependencies</pre></p>


	<p>Microsoft Windows : <pre syntax="ruby">gem install amazon-ec2 --include-dependencies</pre></p>


	<h2>Using the library</h2>


	<h3>The basics&#8230;</h3>


	<p>The library exposes one main interface module <pre syntax="ruby">EC2::Base</pre></p>


	<p>You pass this module method your connection credentials and it will return an object that you can use to make 
method calls directly against <span class="caps">EC2</span>.  All the operations for using the <span class="caps">EC2</span> service, including query string header signing,
are handled automatically for you.</p>


	<p>We have tried to keep the public methods on &#8216;Base&#8217; as close analogues of the <span class="caps">EC2</span> Query <span class="caps">API</span> as defined by Amazon Web Services.  
This similarity allows you to reference the Query <span class="caps">API</span> Reference in the <a href="http://developer.amazonwebservices.com/connect/kbcategory.jspa?categoryID=84"><span class="caps">EC2</span> Developer Guide</a>. 
In most cases the methods names only differ in how they are presented.  e.g. DescribeImages becomes &#8217;@ec2.describe_images() in Ruby.</p>


	<h3>Example Apps</h3>


	<p>The best way to become familiar with &#8216;amazon-ec2&#8217; is to take it for a test drive.  We have provided two simple ways to do that to get you started.</p>


	<h4>&#8216;ec2-gem-example.rb&#8217; Sample Test App</h4>


	<h4>&#8216;ec2sh&#8217; command shell</h4>


	<h3>Use in Ruby scripts</h3>


You can take a look at a running sample
<pre syntax="ruby">
#!/usr/bin/env ruby

require 'rubygems'
require 'ec2'

ACCESS_KEY_ID = '--YOUR AWS ACCESS KEY ID--'
SECRET_ACCESS_KEY = '--YOUR AWS SECRET ACCESS KEY--'

@ec2 = EC2::Base.new(:access_key_id =&gt; ACCESS_KEY_ID, :secret_access_key =&gt; SECRET_ACCESS_KEY)

puts "----- listing images -----" 
ec2.describe_images.each do |image|
  image.members.each do |member|
    puts "#{member} =&gt; #{image[member]}" 
  end
end
</pre>

	<p>An example Ruby script which exercises the library is provided for use as a starting point in the gem installation.  Consult the file which is installed at :</p>


<pre syntax="ruby">[your amazon-ec2 gem dir]/examples/ec2-example.rb</pre>

	<h3>Use in Ruby on Rails applications</h3>


	<p>in config/environment.rb:</p>


<pre syntax="ruby">
# Include Amazon Web Services EC2 gem methods
require 'EC2'
</pre>

in app/controllers/your_controller.rb:
<pre syntax="ruby">
...
ec2 = EC2::Base.new(ACCESS_KEY_ID, SECRET_ACCESS_KEY)
@ec2_images = ec2.describe_images()

# Or with some parameters
# (in this case specific owner ID's)
@ec2_images_mine = ec2.describe_images([],["522821470517"],[])
...
</pre>

	<p>in app/views/your_view.rhtml:</p>


<h6>#</h6>

	<p><span class="caps">FIXME FIXME FIXME</span>
###########################################################</p>



	<p>Test it out with something like this&#8230;</p>


<pre syntax="ruby">
...
&lt;%= debug(@ec2_images) %&gt;
&lt;%= debug(@ec2_images_mine) %&gt;
...
</pre>

	<p>Or this&#8230;</p>


<pre syntax="ruby">
...
&lt;% @ec2_images.each do |image| %&gt;
  &lt;% image.each_with_index do |value, index| %&gt;
    &lt;%= "#{index} =&gt; #{value}" %&gt;&lt;br /&gt;
  &lt;% end %&gt;
&lt;% end %&gt;
...
</pre>

	<p>Or even this&#8230;</p>


<pre syntax="ruby">
...
&lt;table&gt;
  &lt;tr&gt;
    &lt;th&gt;Id&lt;/th&gt;
    &lt;th&gt;Location&lt;/th&gt;
    &lt;th&gt;Owner&lt;/th&gt;
    &lt;th&gt;State&lt;/th&gt;
    &lt;th&gt;Public?&lt;/th&gt;
  &lt;/tr&gt;

  &lt;% for ec2_image in @ec2_images %&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;%=h ec2_image[1] %&gt;&lt;/td&gt;
      &lt;td&gt;&lt;%=h ec2_image[2] %&gt;&lt;/td&gt;
      &lt;td&gt;&lt;%=h ec2_image[3] %&gt;&lt;/td&gt;
      &lt;td&gt;&lt;%=h ec2_image[4] %&gt;&lt;/td&gt;
      &lt;td&gt;&lt;%=h ec2_image[5] %&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;% end %&gt;
&lt;/table&gt;
...
</pre>

	<h2>Contributing</h2>


	<p>We can always use your help!  Do you have Ruby skills?  Do you see a bug or enhancement that you&#8217;d like to see fixed?  We would love to have your patches for documentation, test cases, or enhancements.</p>


	<h2>Project Info</h2>


	<p>This project is managed as a RubyForge project which you can find at <a href="http://amazon-ec2.rubyforge.org/">http://amazon-ec2.rubyforge.org/</a> and this is always the best place to find the latest news, report any bugs, submit feature requests, or provide patches.</p>


	<h2>Learning More</h2>


	<h3>Documentation</h3>


	<p>Complete RDoc generated documentation can be found at <a href="http://amazon-ec2.rubyforge.org/rdoc/">http://amazon-ec2.rubyforge.org/rdoc/</a></p>


	<h3>Websites</h3>


	<p><a href="http://aws.amazon.com/">Amazon Web Services Home</a>
<a href="http://rubyforge.org/projects/amazon-ec2/">Project Home</a>
<a href="http://rubyforge.org/frs/?group_id=2753">Downloads</a>
<a href="http://rubyforge.org/scm/?group_id=2753">Browse Code</a>
<a href="http://rubyforge.org/tracker/?group_id=2753">Report Bugs</a>
<a href="http://rubyforge.org/tracker/?group_id=2753">Request Features</a>
<a href="http://rubyforge.org/tracker/?group_id=2753">Submit Patches</a></p>


	<h3>Related Projects</h3>


	<p><a href="http://capsize.rubyforge.org/">Capsize</a></p>


	<h2>Credits</h2>


	<p>The original sample code for this library was provided by Amazon Web Services, <span class="caps">LLC</span>.  Thanks to them for providing all of us with samples that got this started.</p>


	<p>Thanks to all the great folks who submitted patches and kept this project rolling.  I would especially like to thank Sean Knapp, Kevin Clark, and Randy Bias.  Your patches and help are much appreciated.</p>


	<p>Thanks to Dr. Nic Williams and his great &#8216;NewGem&#8217; Ruby Gem Generator.  This gem of a Gem helped me package up this code for distribution in a flash!  You can find Dr. Nic&#8217;s NewGem generator at <a href="http://newgem.rubyforge.org/">http://newgem.rubyforge.org/</a></p>


	<h2>Contact</h2>


	<p>Comments, patches, and bug reports are welcome. Send an email to the address below or use the RubyForge forum for this project.</p>
    <p class="coda">
      <a href="mailto:grempe-at-rubyforge-dot-org">Glenn Rempe</a>, 19th June 2007<br>
    </p>
</div>

<!-- insert site tracking codes here, like Google Urchin -->

<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">

</script>
<script type="text/javascript">
_uacct = "UA-312156-11";
urchinTracker();
</script>

</body>
</html>
